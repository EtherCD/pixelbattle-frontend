import{q as c,H as v,J as k,u as e,K as U,y as h,L,p as $,e as b,U as w,N as j,Q as F,f as O,o as R}from"./main-Oaz630zD.js";import{B as p,I as y}from"./Icon-t7_ECEtJ.js";const M="_tags_c0lwc_1",D="_empty_c0lwc_10",A={tags:M,empty:D},H="_tag_giprq_1",J="_place_giprq_12",K="_name_giprq_46",Q="_score_giprq_53",W="_selected_giprq_57",_={tag:H,place:J,name:K,score:Q,selected:W};function E({tag:n}){const t=c(v),a=[_.tag,n.name===t.selectedTag.value?_.selected:""].join(" "),i=c(k);function s(){i.isAuthenticated.value&&t.selectAndFetch(n.name)}return e("button",{className:a,onClick:s,children:[e("p",{className:_.place,children:n.place+1}),e("p",{className:_.name,children:n.name}),e("p",{className:_.score,children:n.pixels===-1?"??":n.pixels})]})}const G="_window_m8ewx_1",V="_content_m8ewx_46",X="_title_m8ewx_47",T={window:G,"scale-up":"_scale-up_m8ewx_1","scale-down":"_scale-down_m8ewx_1",content:V,title:X};function P({children:n,title:t}){return e("details",{className:T.window,children:[e("summary",{className:T.title,children:t}),e("div",{className:T.content,children:n})]})}const Y="_input_ep0vs_1",Z={input:Y};function ee({placeholder:n,onInput:t,min:a,max:i}){return e("input",{type:"text",className:Z.input,placeholder:n,onInput:t,minLength:a,maxLength:i})}const x=U(!1),ne="_form_1s9ls_1",te="_closeIcon_1s9ls_7",q={form:ne,closeIcon:te};function ae(){const n=c(v),[t,a]=h("");function i(l){const u=l.target.value;a(u)}function s(){t!==""&&(n.selectAndFetch(t),x.value=!1)}function o(){x.value=!1}return e("div",{className:q.form,children:[e(ee,{placeholder:"Новый тег",onInput:i,min:4,max:8}),e(p,{onClick:s,children:e(y,{icon:"plus"})}),e(p,{onClick:o,type:"danger",children:e(y,{icon:"plus",className:q.closeIcon})})]})}const se="_form_zsgc1_1",ie={form:se};function ce(){const n=c(v);function t(){x.value=!0}function a(){n.remove()}return e("div",{className:ie.form,children:[e(p,{onClick:t,children:"Новый тег"}),e(p,{onClick:a,type:"danger",children:"Убрать текущий"})]})}function oe(){const[n,t]=h(),a=c(v),i=c(k);return c(L),$(()=>{a.fetch();const s=setInterval(a.fetch,b.time.update.tags);t(s)},[]),e(P,{title:"Теги",children:e("div",{className:A.tags,children:[a.tags.value.length===0?e("p",{className:A.empty,children:"Нет тегов"}):a.tags.value.map((s,o)=>e(E,{tag:s},s.name)),i.isAuthenticated.value?x.value?e(ae,{}):e(ce,{}):null]})})}const le="_sidebar_1efu7_1",re={sidebar:le},ue="_login_1e9cb_1",me="_params_1e9cb_6",pe="_wrapper_1e9cb_14",C={login:ue,params:me,wrapper:pe},de="_wrapper_zckff_1",_e="_label_zckff_7",fe="_value_zckff_11",I={wrapper:de,label:_e,value:fe};function N({label:n,value:t}){return e("div",{className:I.wrapper,children:[e("p",{className:I.label,children:n}),e("p",{className:I.value,children:t})]})}function he(){var i,s,o,l,r,u;const n=c(k),t=c(v);$(()=>{if(n.load(),n.isAuthenticated.value){n.fetch().then(()=>{var z;return t.select(((z=n.user.value)==null?void 0:z.tag)??"")}),window.history.replaceState({},document.title,document.location.pathname);return}const g=new URLSearchParams(document.location.search),d=g.get("token");if(!d)return;const S=g.get("id");S&&(n.login(d,S),n.fetch(),window.history.replaceState({},document.title,document.location.pathname))},[]);const a={Имя:(i=n.user.value)==null?void 0:i.username,Айди:(s=n.user.value)==null?void 0:s.userID,Тег:(o=n.user.value)==null?void 0:o.tag,Статус:(l=n.user.value)!=null&&l.banned?`Забанен по причине "${((r=n.user.value)==null?void 0:r.banned.reason)??"Не указано"}"`:null,Роль:{[w.User]:null,[w.Moderator]:"Модератор",[w.Admin]:"Админ"}[((u=n.user.value)==null?void 0:u.role)??w.User]};return n.isAuthenticated.value?e(P,{title:"Профиль",children:e("div",{class:C.wrapper,children:[e("div",{className:C.params,children:Object.entries(a).map(([g,d])=>d?e(N,{value:d,label:g}):null)}),e(p,{href:"/logout",children:"Выйти"})]})}):e("div",{class:C.login,children:e(p,{href:"/login",children:"Войти"})})}const ve="_notifications_64rx3_1",ge={notifications:ve},we="_notification_1mbo3_1",Ne="_title_1mbo3_24",be="_message_1mbo3_29",ye="_error_1mbo3_43",xe="_animate_1mbo3_47",f={notification:we,"add-notification":"_add-notification_1mbo3_1",title:Ne,message:be,error:ye,animate:xe,"remove-notification":"_remove-notification_1mbo3_1"};function $e({notification:n}){const[t,a]=h(""),[i,s]=h(setTimeout(()=>{},0));return $(()=>{s(setTimeout(()=>{a(f.animate),setTimeout(()=>j.removeNotification(n.id),200)},b.time.notificationRemoved))},[]),e("div",{className:[f.notification,f[n.type],t].join(" "),children:[e("p",{className:f.title,children:n.title}),e("p",{className:f.message,children:n.message})]})}function Te(){const n=c(F);return e("div",{className:ge.notifications,children:n.notifications.value.map((t,a)=>e($e,{notification:t},t.id))})}function Ce(){return e("div",{className:re.sidebar,children:[e(he,{}),e(oe,{}),e(Te,{})]})}const Ie="_wrapper_518ip_1",ke="_content_518ip_39",Se="_title_518ip_40",ze="_params_518ip_48",Ae="_media_518ip_56",qe="_icons_518ip_81",m={wrapper:Ie,"scale-down":"_scale-down_518ip_1","scale-up":"_scale-up_518ip_1",content:ke,title:Se,params:ze,media:Ae,icons:qe},Be="_wrapper_u7e1h_1",Le="_input_u7e1h_7",B={wrapper:Be,input:Le};function Pe(){const n=c(O);function t(a){n.settings.value={...n.settings.value,enableSnow:a.target.checked},n.save()}return e("div",{className:B.wrapper,children:[e("input",{type:"checkbox",className:B.input,onChange:t,defaultChecked:n.settings.value.enableSnow}),e(y,{icon:"snowflake",size:35,viewBoxSize:272})]})}function Ue(){const n=c(L),t=c(R),[a,i]=h();if($(()=>{n.fetch(),i(setInterval(n.fetch,b.time.update.info))},[]),n.info.value===null||t.image.value===null)return null;const s=n.info.value.ended,o=n.info.value.name==="season:blank"?"Без названия":n.info.value.name,l=s?"🏁":"⚔️";return e("details",{className:m.wrapper,children:[e("summary",{className:m.title,children:[o," ",l]}),e("div",{className:m.content,children:[e("div",{className:m.params,children:[e(N,{label:"Кулдаун",value:n.info.value.cooldown+"мс"}),e(N,{label:"Размер",value:t.image.value.size.x+"x"+t.image.value.size.y}),e(N,{label:"Онлайн",value:n.info.value.online.toString()})]}),e("div",{className:m.icons,children:[e("div",{className:m.media,children:Object.entries(b.media).map(([r,u])=>e("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:e(y,{icon:r,size:35,viewBoxSize:256})},r))}),e(Pe,{})]})]})]})}const je="_wrapper_udxdq_1",Fe={wrapper:je};function Me(){return e("div",{className:Fe.wrapper,children:[e(Ue,{}),e(Ce,{})]})}export{Me as TopBar};
