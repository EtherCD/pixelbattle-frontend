import{q as c,H as v,J as C,u as e,K as L,y as h,L as A,p as y,e as w,N as P,Q as j,f as F,o as O}from"./main-kYMwcdJP.js";import{B as p,I as N}from"./Icon-nyt6boxk.js";const M="_tags_c0lwc_1",R="_empty_c0lwc_10",S={tags:M,empty:R},D="_tag_giprq_1",H="_place_giprq_12",J="_name_giprq_46",K="_score_giprq_53",Q="_selected_giprq_57",_={tag:D,place:H,name:J,score:K,selected:Q};function U({tag:t}){const n=c(v),a=[_.tag,t.name===n.selectedTag.value?_.selected:""].join(" "),i=c(C);function s(){i.isAuthenticated.value&&n.selectAndFetch(t.name)}return e("button",{className:a,onClick:s,children:[e("p",{className:_.place,children:t.place+1}),e("p",{className:_.name,children:t.name}),e("p",{className:_.score,children:t.pixels===-1?"??":t.pixels})]})}const W="_window_m8ewx_1",E="_content_m8ewx_46",G="_title_m8ewx_47",x={window:W,"scale-up":"_scale-up_m8ewx_1","scale-down":"_scale-down_m8ewx_1",content:E,title:G};function B({children:t,title:n}){return e("details",{className:x.window,children:[e("summary",{className:x.title,children:n}),e("div",{className:x.content,children:t})]})}const V="_input_ep0vs_1",X={input:V};function Y({placeholder:t,onInput:n,min:a,max:i}){return e("input",{type:"text",className:X.input,placeholder:t,onInput:n,minLength:a,maxLength:i})}const b=L(!1),Z="_form_1s9ls_1",ee="_closeIcon_1s9ls_7",z={form:Z,closeIcon:ee};function te(){const t=c(v),[n,a]=h("");function i(r){const l=r.target.value;a(l)}function s(){n!==""&&(t.selectAndFetch(n),b.value=!1)}function o(){b.value=!1}return e("div",{className:z.form,children:[e(Y,{placeholder:"Новый тег",onInput:i,min:4,max:8}),e(p,{onClick:s,children:e(N,{icon:"plus"})}),e(p,{onClick:o,type:"danger",children:e(N,{icon:"plus",className:z.closeIcon})})]})}const ne="_form_zsgc1_1",ae={form:ne};function se(){const t=c(v);function n(){b.value=!0}function a(){t.remove()}return e("div",{className:ae.form,children:[e(p,{onClick:n,children:"Новый тег"}),e(p,{onClick:a,type:"danger",children:"Убрать текущий"})]})}function ie(){const[t,n]=h(),a=c(v),i=c(C);return c(A),y(()=>{a.fetch();const s=setInterval(a.fetch,w.time.update.tags);n(s)},[]),e(B,{title:"Теги",children:e("div",{className:S.tags,children:[a.tags.value.length===0?e("p",{className:S.empty,children:"Нет тегов"}):a.tags.value.map((s,o)=>e(U,{tag:s},s.name)),i.isAuthenticated.value?b.value?e(te,{}):e(se,{}):null]})})}const ce="_sidebar_1efu7_1",oe={sidebar:ce},le="_login_1e9cb_1",re="_params_1e9cb_6",ue="_wrapper_1e9cb_14",$={login:le,params:re,wrapper:ue},me="_wrapper_zckff_1",pe="_label_zckff_7",de="_value_zckff_11",T={wrapper:me,label:pe,value:de};function g({label:t,value:n}){return e("div",{className:T.wrapper,children:[e("p",{className:T.label,children:t}),e("p",{className:T.value,children:n})]})}function _e(){var i,s,o,r,u;const t=c(C),n=c(v);y(()=>{if(t.load(),t.isAuthenticated.value){t.fetch().then(()=>{var k;return n.select(((k=t.user.value)==null?void 0:k.tag)??"")}),window.history.replaceState({},document.title,document.location.pathname);return}const l=new URLSearchParams(document.location.search),d=l.get("token");if(!d)return;const I=l.get("id");I&&(t.login(d,I),t.save(),t.fetch(),window.history.replaceState({},document.title,document.location.pathname))},[]);const a={Имя:(i=t.user.value)==null?void 0:i.username,Айди:(s=t.user.value)==null?void 0:s.userID,Тег:(o=t.user.value)==null?void 0:o.tag,Статус:(r=t.user.value)!=null&&r.banned?"Забанен":null,Роль:(u=t.user.value)!=null&&u.isMod?"Модератор":null};return t.isAuthenticated.value?e(B,{title:"Профиль",children:e("div",{class:$.wrapper,children:[e("div",{className:$.params,children:Object.entries(a).map(([l,d])=>d?e(g,{value:d,label:l}):null)}),e(p,{href:"/logout",children:"Выйти"})]})}):e("div",{class:$.login,children:e(p,{href:"/login",children:"Войти"})})}const fe="_notifications_64rx3_1",he={notifications:fe},ve="_notification_1mbo3_1",ge="_title_1mbo3_24",we="_message_1mbo3_29",Ne="_error_1mbo3_43",be="_animate_1mbo3_47",f={notification:ve,"add-notification":"_add-notification_1mbo3_1",title:ge,message:we,error:Ne,animate:be,"remove-notification":"_remove-notification_1mbo3_1"};function ye({notification:t}){const[n,a]=h(""),[i,s]=h(setTimeout(()=>{},0));return y(()=>{s(setTimeout(()=>{a(f.animate),setTimeout(()=>P.removeNotification(t.id),200)},w.time.notificationRemoved))},[]),e("div",{className:[f.notification,f[t.type],n].join(" "),children:[e("p",{className:f.title,children:t.title}),e("p",{className:f.message,children:t.message})]})}function xe(){const t=c(j);return e("div",{className:he.notifications,children:t.notifications.value.map((n,a)=>e(ye,{notification:n},n.id))})}function $e(){return e("div",{className:oe.sidebar,children:[e(_e,{}),e(ie,{}),e(xe,{})]})}const Te="_wrapper_518ip_1",Ce="_content_518ip_39",Ie="_title_518ip_40",ke="_params_518ip_48",Se="_media_518ip_56",ze="_icons_518ip_81",m={wrapper:Te,"scale-down":"_scale-down_518ip_1","scale-up":"_scale-up_518ip_1",content:Ce,title:Ie,params:ke,media:Se,icons:ze},qe="_wrapper_u7e1h_1",Ae="_input_u7e1h_7",q={wrapper:qe,input:Ae};function Be(){const t=c(F);function n(a){t.settings.value={...t.settings.value,enableSnow:a.target.checked},t.save()}return e("div",{className:q.wrapper,children:[e("input",{type:"checkbox",className:q.input,onChange:n,defaultChecked:t.settings.value.enableSnow}),e(N,{icon:"snowflake",size:35,viewBoxSize:272})]})}function Le(){const t=c(A),n=c(O),[a,i]=h();if(y(()=>{t.fetch(),i(setInterval(t.fetch,w.time.update.info))},[]),t.info.value===null||n.image.value===null)return null;const s=t.info.value.ended,o=t.info.value.name==="season:blank"?"Без названия":t.info.value.name,r=s?"🏁":"⚔️";return e("details",{className:m.wrapper,children:[e("summary",{className:m.title,children:[o," ",r]}),e("div",{className:m.content,children:[e("div",{className:m.params,children:[e(g,{label:"Кулдаун",value:t.info.value.cooldown+"мс"}),e(g,{label:"Размер",value:n.image.value.size.x+"x"+n.image.value.size.y}),e(g,{label:"Онлайн",value:t.info.value.online.toString()})]}),e("div",{className:m.icons,children:[e("div",{className:m.media,children:Object.entries(w.media).map(([u,l])=>e("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:e(N,{icon:u,size:35,viewBoxSize:256})},u))}),e(Be,{})]})]})]})}const Pe="_wrapper_udxdq_1",je={wrapper:Pe};function Me(){return e("div",{className:je.wrapper,children:[e(Le,{}),e($e,{})]})}export{Me as TopBar};
