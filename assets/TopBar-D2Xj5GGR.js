import{q as c,H as v,J as I,u as e,K as j,y as f,L as q,p as y,e as N,U as g,N as F,Q as L,f as O,o as P}from"./main-fFTBoQDc.js";import{B as m,I as b}from"./Icon-BcG3gC0-.js";const U="_tags_c0lwc_1",M="_empty_c0lwc_10",z={tags:U,empty:M},R="_tag_giprq_1",D="_place_giprq_12",H="_name_giprq_46",J="_score_giprq_53",K="_selected_giprq_57",_={tag:R,place:D,name:H,score:J,selected:K};function Q({tag:n}){const t=c(v),s=[_.tag,n.name===t.selectedTag.value?_.selected:""].join(" "),i=c(I);function a(){i.isAuthenticated.value&&t.selectAndFetch(n.name)}return e("button",{className:s,onClick:a,children:[e("p",{className:_.place,children:n.place+1}),e("p",{className:_.name,children:n.name}),e("p",{className:_.score,children:n.pixels===-1?"??":n.pixels})]})}const W="_window_m8ewx_1",E="_content_m8ewx_46",G="_title_m8ewx_47",$={window:W,"scale-up":"_scale-up_m8ewx_1","scale-down":"_scale-down_m8ewx_1",content:E,title:G};function B({children:n,title:t}){return e("details",{className:$.window,children:[e("summary",{className:$.title,children:t}),e("div",{className:$.content,children:n})]})}const V="_input_ep0vs_1",X={input:V};function Y({placeholder:n,onInput:t,min:s,max:i}){return e("input",{type:"text",className:X.input,placeholder:n,onInput:t,minLength:s,maxLength:i})}const x=j(!1),Z="_form_1s9ls_1",ee="_closeIcon_1s9ls_7",S={form:Z,closeIcon:ee};function ne(){const n=c(v),[t,s]=f("");function i(l){const u=l.target.value;s(u)}function a(){t!==""&&(n.selectAndFetch(t),x.value=!1)}function o(){x.value=!1}return e("div",{className:S.form,children:[e(Y,{placeholder:"Новый тег",onInput:i,min:4,max:8}),e(m,{onClick:a,children:e(b,{icon:"plus"})}),e(m,{onClick:o,type:"danger",children:e(b,{icon:"plus",className:S.closeIcon})})]})}const te="_form_zsgc1_1",se={form:te};function ae(){const n=c(v);function t(){x.value=!0}function s(){n.remove()}return e("div",{className:se.form,children:[e(m,{onClick:t,children:"Новый тег"}),e(m,{onClick:s,type:"danger",children:"Убрать текущий"})]})}function ie(){const[n,t]=f(),s=c(v),i=c(I);return c(q),y(()=>{s.fetch();const a=setInterval(s.fetch,N.time.update.tags);t(a)},[]),e(B,{title:"Теги",children:e("div",{className:z.tags,children:[s.tags.value.length===0?e("p",{className:z.empty,children:"Нет тегов"}):s.tags.value.map((a,o)=>e(Q,{tag:a},a.name)),i.isAuthenticated.value?x.value?e(ne,{}):e(ae,{}):null]})})}const ce="_sidebar_1efu7_1",oe={sidebar:ce},le="_login_1e9cb_1",re="_params_1e9cb_6",ue="_wrapper_1e9cb_14",T={login:le,params:re,wrapper:ue},pe="_wrapper_zckff_1",me="_label_zckff_7",_e="_value_zckff_11",C={wrapper:pe,label:me,value:_e};function w({label:n,value:t}){return e("div",{className:C.wrapper,children:[e("p",{className:C.label,children:n}),e("p",{className:C.value,children:t})]})}function de(){var i,a,o,l,r,u;const n=c(I),t=c(v);y(()=>{n.load(),n.isAuthenticated.value&&n.fetch().then(()=>{var h;return t.select(((h=n.user.value)==null?void 0:h.tag)??"")})},[]);const s={Имя:(i=n.user.value)==null?void 0:i.username,Айди:(a=n.user.value)==null?void 0:a.userID,Тег:(o=n.user.value)==null?void 0:o.tag,Статус:(l=n.user.value)!=null&&l.banned?`Забанен по причине "${((r=n.user.value)==null?void 0:r.banned.reason)??"Не указано"}"`:null,Роль:{[g.User]:null,[g.Moderator]:"Модератор",[g.Admin]:"Админ"}[((u=n.user.value)==null?void 0:u.role)??g.User]};return n.isAuthenticated.value?e(B,{title:"Профиль",children:e("div",{class:T.wrapper,children:[e("div",{className:T.params,children:Object.entries(s).map(([h,k])=>k?e(w,{value:k,label:h}):null)}),e(m,{href:"/logout",children:"Выйти"})]})}):e("div",{class:T.login,children:e(m,{href:"/login",children:"Войти"})})}const fe="_notifications_64rx3_1",ve={notifications:fe},he="_notification_1mbo3_1",ge="_title_1mbo3_24",we="_message_1mbo3_29",Ne="_error_1mbo3_43",be="_animate_1mbo3_47",d={notification:he,"add-notification":"_add-notification_1mbo3_1",title:ge,message:we,error:Ne,animate:be,"remove-notification":"_remove-notification_1mbo3_1"};function xe({notification:n}){const[t,s]=f(""),[i,a]=f(setTimeout(()=>{},0));return y(()=>{a(setTimeout(()=>{s(d.animate),setTimeout(()=>F.removeNotification(n.id),200)},N.time.notificationRemoved))},[]),e("div",{className:[d.notification,d[n.type],t].join(" "),children:[e("p",{className:d.title,children:n.title}),e("p",{className:d.message,children:n.message})]})}function ye(){const n=c(L);return e("div",{className:ve.notifications,children:n.notifications.value.map((t,s)=>e(xe,{notification:t},t.id))})}function $e(){return e("div",{className:oe.sidebar,children:[e(de,{}),e(ie,{}),e(ye,{})]})}const Te="_wrapper_518ip_1",Ce="_content_518ip_39",Ie="_title_518ip_40",ke="_params_518ip_48",ze="_media_518ip_56",Se="_icons_518ip_81",p={wrapper:Te,"scale-down":"_scale-down_518ip_1","scale-up":"_scale-up_518ip_1",content:Ce,title:Ie,params:ke,media:ze,icons:Se},Ae="_wrapper_u7e1h_1",qe="_input_u7e1h_7",A={wrapper:Ae,input:qe};function Be(){const n=c(O);function t(s){n.settings.value={...n.settings.value,enableSnow:s.target.checked},n.save()}return e("div",{className:A.wrapper,children:[e("input",{type:"checkbox",className:A.input,onChange:t,defaultChecked:n.settings.value.enableSnow}),e(b,{icon:"snowflake",size:35,viewBoxSize:272})]})}function je(){const n=c(q),t=c(P),[s,i]=f();if(y(()=>{n.fetch(),i(setInterval(n.fetch,N.time.update.info))},[]),n.info.value===null||t.image.value===null)return null;const a=n.info.value.ended,o=n.info.value.name==="season:blank"?"Без названия":n.info.value.name,l=a?"🏁":"⚔️";return e("details",{className:p.wrapper,children:[e("summary",{className:p.title,children:[o," ",l]}),e("div",{className:p.content,children:[e("div",{className:p.params,children:[e(w,{label:"Кулдаун",value:n.info.value.cooldown+"мс"}),e(w,{label:"Размер",value:t.image.value.size.x+"x"+t.image.value.size.y}),e(w,{label:"Онлайн",value:n.info.value.online.toString()})]}),e("div",{className:p.icons,children:[e("div",{className:p.media,children:Object.entries(N.media).map(([r,u])=>e("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:e(b,{icon:r,size:35,viewBoxSize:256})},r))}),e(Be,{})]})]})]})}const Fe="_wrapper_udxdq_1",Le={wrapper:Fe};function Ue(){return e("div",{className:Le.wrapper,children:[e(je,{}),e($e,{})]})}export{Ue as TopBar};
